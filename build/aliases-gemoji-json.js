const fs = require('fs')
const path = require('path')

const data = fs.readFileSync('/dev/stdin', 'utf-8')
const emoji = JSON.parse(data)

let aliases = []
for (let i = 0; i < emoji.length; i++) {
  let o = emoji[i]
  if (o.aliases) {
    aliases.push(...o.aliases)
  }
}
aliases.sort()

const str = `// DO NOT modify this file. Auto generated by ${path.basename(__filename)}
// See https://github.com/github/gemoji/blob/master/db/emoji.json
module.exports = ${JSON.stringify(aliases)}
`

fs.writeFileSync(path.join(__dirname, '..', 'src', 'gemoji-aliases.js'), str)
